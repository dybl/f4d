SET(CMAKE_PREFIX_PATH "C:\\Qt\\Qt5.7.1\\5.7\\msvc2015_64\\")
SET(CMAKE_INCLUDE_CURRENT_DIR ON)
# SET(CMAKE_AUTOMOC ON)

FIND_PACKAGE(Qt5Widgets)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/inc
					${CMAKE_CURRENT_SOURCE_DIR}/src
					${CMAKE_CURRENT_BINARY_DIR}
					)
					
AUX_SOURCE_DIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/src DIR_SRCS)

FILE(GLOB INCS "inc/*.h")
FILE(GLOB HEADERS "src/*.h")
SOURCE_GROUP("Header Files" FILES ${INCS} ${HEADERS})

FILE(GLOB MOCS "inc/gui.h")
FILE(GLOB FORMS "form/*.ui")
# FILE(GLOB RES "qrc/*.qrc")

SOURCE_GROUP("Form Files" FILES ${FORMS})

QT5_WRAP_CPP(HEADERS_MOC ${MOCS})
QT5_WRAP_UI(FORMS_UIC ${FORMS})
# QT5_ADD_RESOURCES(RES_RCC ${RES})

SOURCE_GROUP("Generated Files" FILES ${HEADERS_MOC} ${FORMS_UIC} "gui_automoc.cpp")

ADD_EXECUTABLE(gui ${DIR_SRCS} ${HEADERS} ${INCS} ${HEADERS_MOC} ${FORMS_UIC})

TARGET_LINK_LIBRARIES(gui Qt5::Widgets)

SET_TARGET_PROPERTIES(gui PROPERTIES FOLDER "App")